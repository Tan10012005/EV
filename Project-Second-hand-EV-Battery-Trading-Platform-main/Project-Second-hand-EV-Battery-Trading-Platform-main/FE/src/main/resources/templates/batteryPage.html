<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pin xe điện - EV Second</title>
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
          href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap"
          rel="stylesheet"
  />

  <!-- Font Awesome Icons -->
  <link
          rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
          integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer"
  />

  <!-- Custom CSS -->
  <link rel="stylesheet" th:href="@{/css/batteryPage.css}" />
</head>
<body>
<!-- =============================
     HEADER SECTION
     ============================= -->
<header th:if="${guest.equals('false')}" th:include="/commonComponents/header.html"></header>
<header th:if="${guest.equals('true')}" th:include="/commonComponents/guestHeader.html"></header>
<!-- =============================
     SEARCH SECTION
     ============================= -->
<section class="search">
  <div class="search__container">
    <div class="search__form">
      <!-- Category Dropdown -->
      <div class="custom-dropdown">
        <div class="dropdown-selected" id="categoryDropdown">
          <span th:text="${productType}" class="selected-text">Danh mục</span>
          <i class="fas fa-chevron-down dropdown-arrow"></i>
        </div>
        <div class="dropdown-options" id="categoryOptions">
          <div class="dropdown-option" data-value="all">Danh mục</div>
          <div class="dropdown-option" data-value="motorbike" th:if="${productType != 'Xe điện'}">
            Xe điện
          </div>
          <div class="dropdown-option" data-value="bicycle" th:if="${productType != 'Pin'}">
            Pin
          </div>
        </div>
      </div>

      <!-- Search Input -->
      <div class="search__input">
        <button class="search__btn">
          <i class="fas fa-search"></i>
        </button>
        <input type="text" th:placeholder="${!postTitle.equals('default') ? postTitle : 'Tìm sản phẩm'}" />
      </div>

      <!-- Location Dropdown -->
      <div class="location-dropdown">
        <div class="dropdown-selected" id="locationDropdown">
          <i class="fas fa-map-marker-alt"></i>
          <span th:text="${!location.equals('default') ? location : 'Địa điểm'}" class="selected-text">Địa điểm</span>
          <i class="fas fa-chevron-down dropdown-arrow"></i>
        </div>
        <div class="dropdown-options" id="locationOptions">
          <div class="dropdown-option" th:if="${!location.equals('Thành Phố Hồ Chí Minh')}" >Thành Phố Hồ Chí Minh</div>
          <div class="dropdown-option" th:if="${!location.equals('Hà Nội')}" >Hà Nội</div>
          <div class="dropdown-option" th:if="${!location.equals('Đà Nẵng')}" >Đà Nẵng</div>
          <div class="dropdown-option" th:if="${!location.equals('Hải Phòng')}" >Hải Phòng</div>
          <div class="dropdown-option" th:if="${!location.equals('Cần Thơ')}" >Cần Thơ</div>
          <div class="dropdown-option" th:if="${!location.equals('Vũng Tàu')}" >Vũng Tàu</div>
          <div class="dropdown-option" th:if="${!location.equals('Nha Trang')}" >Nha Trang</div>
          <div class="dropdown-option" th:if="${!location.equals('Huế')}" >Huế</div>
          <div class="dropdown-option" th:if="${!location.equals('Đà Lạt')}" >Đà Lạt</div>
          <div class="dropdown-option" th:if="${!location.equals('Quảng Ninh')}" >
            Quảng Ninh
          </div>
        </div>
      </div>

      <!-- Search Button -->
      <button class="search__post-btn">Tìm kiếm</button>
    </div>
  </div>
</section>
<!-- =============================
     BATTERY LIST SECTION
     ============================= -->
<section class="battery">
  <h2 class="battery__title">DANH SÁCH PIN XE ĐIỆN</h2>
  <div class="battery__container">
    <!-- Battery Item 1 -->
    <div th:each="post :${posts}" class="battery__item">
      <input type="hidden" th:value="${post.getPostsId()}" class="postId"/>
      <div class="battery__item__image">
        <img
                th:src="${post.getImages()[0]}"
                alt="Pin Lithium 48V"
        />
      </div>
      <div class="battery__item__details">
        <h3 class="battery__item__details__title" th:text="${post.title}">
          Pin Lithium 48V 20Ah - Chính hãng
        </h3>
        <p class="battery__item__details__brand">
          Thương hiệu: <span th:text="${post.getProduct().getBattery().getBrand()}">Samsung SDI</span>
        </p>
        <p class="battery__item__details__capacity">
          Dung tích: <span th:text="${post.getProduct().getBattery().getCapacity()} +V">48V - 20Ah</span>
        </p>
        <p class="battery__item__details__price" th:text="${post.getPriceFormated()}+'đ'">4.500.000 đ</p>
        <div class="battery__item__details__location">
          <i class="fas fa-map-marker-alt"></i> <span th:text="${post.getSeller().getCity()}"></span>
        </div>
        <div class="battery__item__details__seller">
          <img
                  th:src="${post.getSeller().getAvatarUrl()}"
                  alt="Seller Image"
          />
          <p class="battery__item__details__seller__name" th:text="${post.getSeller().getUsername()}">Nguyễn Văn An</p>
          <p class="battery__item__details__seller__rating">
            <span th:text="${post.getAverageRating()}"></span> <i class="fas fa-star"></i>
          </p>
        </div>
      </div>
      <div class="battery__item__actions"  th:if="${post.getSeller().getMemberId() != user.getMemberId()}">
        <a href="#" class="battery__item__actions__buy"
        ><i class="fa-solid fa-plus"></i> Yêu cầu giao dịch</a
        >
        <a th:href="@{'/home/wishList/add/' + ${post.getPostsId()}}" th:if="${guest.equals('false')}" class="battery__item__actions__heart">
          <i class="far fa-heart"></i>
        </a>
      </div>
    </div>
    <h3 th:if="${#lists.isEmpty(posts)}" class="no-posts-message">Hiện không có bài đăng nào về pin xe điện.</h3>
  </div>
  <div class="battery__page">
    <a href="#">&laquo;</a>
    <a href="#" class="active">1</a>
    <a href="#">2</a>
    <a href="#">3</a>
    <a href="#">4</a>
    <a href="#">5</a>
    <a href="#">&raquo;</a>
  </div>
</section>
<!-- =============================
     FOOTER SECTION
     ============================= -->
<footer th:include="/commonComponents/footer.html"></footer>

<!-- =============================
     JAVASCRIPT
     ============================= -->
<script th:src="@{/js/commonComponents/searchBar.js}"></script>
<script th:src="@{/js/batteryPage.js}"></script>
</body>
</html>